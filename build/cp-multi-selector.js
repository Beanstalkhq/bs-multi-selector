/*!
 * cp-multi-selector
 * author: Bret Little
 * copyright: 2015
 * license: MIT
 * version: 1.1.3
 */
!function(e){function t(n){if(i[n])return i[n].exports;var l=i[n]={exports:{},id:n,loaded:!1};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var n=(i(1),i(2));n.module("cp-multi-selector",[]),i(3)},function(e,t,i){e.exports=$},function(e,t,i){e.exports=angular},function(e,t,i){"use strict";var n=i(4),l=i(5),s=i(6);i(7),angular.module("cp-multi-selector").directive("cpMultiSelector",["$timeout",function(e){return{restrict:"E",scope:{source:"=",selectedItems:"=",template:"=",placeholder:"@",onChange:"&",icon:"@"},template:l,link:function(t,i,l){function o(){var n=i.position(),l=$(window).width();n.left+298>=l&&(t.dialogStyle.right=0),e(function(){t.$apply(function(){var e=i.height();t.dialogStyle.top=e+1+"px"})},100,!1)}function c(){e(function(){t.$apply(function(){t.onChange()})},null,!1)}var r=n.has(l,"single"),p=n.uniqueId();t.dialogStyle={},t.showDialog=!1,t.highlightedIndex=null,t.displayDialog=function(){t.showDialog=!0,setTimeout(function(){i.find(".cp-multi-selector__dialog__input").focus()},100),o()},t.$watch("template",function(e){t.itemTemplate=e||s}),t.$watch("userInput",function(){t.highlightedIndex=null}),t.selectItem=function(e){return r?(t.selectedItems=[e],c(),t.showDialog=!1):(n.find(t.selectedItems,e)?t.removeItem(e):t.selectedItems?t.selectedItems.push(e):t.selectedItems=[e],o(),void c())},t.removeItem=function(e){t.selectedItems=n.without(t.selectedItems,e),c()},t.isSelected=function(e){return!!n.find(t.selectedItems,e)},t.keyDown=function(e){var i=e.which;40===i?n.isNull(t.highlightedIndex)?t.highlightedIndex=0:t.highlightedIndex<t.filteredItems.length-1&&(t.highlightedIndex=t.highlightedIndex+1):38===i?t.highlightedIndex?t.highlightedIndex>0&&(t.highlightedIndex=t.highlightedIndex-1):t.highlightedIndex=0:13===i?n.isNull(t.highlightedIndex)||t.selectItem(t.filteredItems[t.highlightedIndex]):27===i&&(t.showDialog=!1)},$("body").on("click.cpmultiselector"+p,function(e){$(e.target).closest(i).length||t.$apply(function(){t.showDialog=!1})}),t.$on("$destroy",function(){$("body").off("click.cpmultiselector"+p)})}}}]),angular.module("cp-multi-selector").directive("cpMultiSelectorItem",["$compile",function(e){return{restrict:"E",scope:{template:"="},link:function(t,i,n){var l;t.$watch("template",function(n){n&&(l&&l.remove(),l=e(t.template)(t.$parent),i.append(l))})}}}])},function(e,t,i){e.exports=_},function(e,t,i){e.exports='<div class=cp-multi-selector ng-if=!icon><input type=input class=cp-multi-selector__hidden-input ng-focus=displayDialog()><div ng-click=displayDialog() type=text class="cp-multi-selector__main-input cps-form-control"><div class="cp-multi-selector__pill cps-white cps-bg-gray-10" ng-repeat="item in selectedItems">{{item.first_name}} {{item.last_name}}<i ng-click=removeItem(item) class="cps-icon cps-icon-sm-close"></i></div></div></div><div ng-if=icon class=cp-multi-selector__icon><div class="cp-multi-selector__pill +inline cps-white cps-bg-gray-10" ng-repeat="item in selectedItems"><span style="vertical-align: top">{{item.first_name}} {{item.last_name}}</span> <i ng-click=removeItem(item) class="cps-icon cps-icon-sm-close"></i></div><div class=cps-btn-icon ng-click=displayDialog()><a href="" class=cps-link><span class="cps-icon {{icon}}"></span></a></div></div><div class="cp-multi-selector__dialog depth-z2" ng-show=showDialog ng-style=dialogStyle><input ng-keydown=keyDown($event) class="cps-form-control cp-multi-selector__dialog__input" ng-model=userInput placeholder={{placeholder}}><div class=cp-multi-selector__dialog__items><cp-multi-selector-item ng-class="{\'+selected\': isSelected(item), \'+highlighted\': ($index === highlightedIndex) }" ng-click=selectItem(item) ng-repeat="item in filteredItems = (source | filter:userInput | limitTo:4)" template=itemTemplate></cp-multi-selector-item></div></div>'},function(e,t,i){e.exports='<div class="cp-multi-selector-item__icon cps-bg-medium-gray cps-gray-5">{{item.first_name[0]}}{{item.last_name[0]}}</div><div class=cp-multi-selector-item__title>{{item.first_name}} {{item.last_name}}</div><div class=cp-multi-selector-item__check><i class="cps-icon cps-icon-lg-check cps-info"></i></div>'},function(e,t,i){var n=i(8);"string"==typeof n&&(n=[[e.id,n,""]]);i(10)(n,{})},function(e,t,i){t=e.exports=i(9)(),t.push([e.id,"cp-multi-selector{display:inline-block;position:relative;font-size:1.4rem}.cp-multi-selector{width:340px;z-index:1}.cp-multi-selector__hidden-input{position:absolute}.cp-multi-selector__dialog{background:#fff;padding:16px 16px 8px;position:absolute;top:33px;min-width:298px;width:auto;border-radius:2px}.cp-multi-selector__dialog__items{margin:16px -16px 8px}cp-multi-selector-item{display:block;height:40px;position:relative;padding-top:6px;cursor:pointer;padding-left:16px;padding-right:16px}cp-multi-selector-item:hover,cp-multi-selector-item.\\+highlighted{background-color:#F7F7F7}cp-multi-selector-item.\\+selected .cp-multi-selector-item__icon{background-color:#45A8F8!important}cp-multi-selector-item.\\+selected .cp-multi-selector-item__check{visibility:visible}.cp-multi-selector-item__icon{display:inline-block;vertical-align:middle;height:28px;width:28px;text-align:center;font-weight:600;padding-top:.6rem;border-radius:2px}.cp-multi-selector-item__title{display:inline-block;position:absolute;left:56px;top:12px}.cp-multi-selector-item__check{display:inline-block;visibility:hidden;float:right;font-size:2.6rem;position:relative;right:.2rem}.cp-multi-selector__main-input.cps-form-control{position:relative;z-index:2;padding:2px 2px 0;min-height:32px;height:auto}.cp-multi-selector__pill{display:inline-block;padding:2px 8px;margin-right:5px;height:25px;margin-bottom:3px;vertical-align:top}.cp-multi-selector__pill.\\+inline{position:relative;top:3px}.cp-multi-selector__pill .cps-icon{position:relative;top:-2px;right:-4px;cursor:pointer}.cp-multi-selector__icon{position:relative}",""])},function(e,t,i){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e}},function(e,t,i){function n(e,t){for(var i=0;i<e.length;i++){var n=e[i],l=a[n.id];if(l){l.refs++;for(var s=0;s<l.parts.length;s++)l.parts[s](n.parts[s]);for(;s<n.parts.length;s++)l.parts.push(o(n.parts[s],t))}else{for(var c=[],s=0;s<n.parts.length;s++)c.push(o(n.parts[s],t));a[n.id]={id:n.id,refs:1,parts:c}}}}function l(e){for(var t=[],i={},n=0;n<e.length;n++){var l=e[n],s=l[0],o=l[1],c=l[2],r=l[3],p={css:o,media:c,sourceMap:r};i[s]?i[s].parts.push(p):t.push(i[s]={id:s,parts:[p]})}return t}function s(){var e=document.createElement("style"),t=m();return e.type="text/css",t.appendChild(e),e}function o(e,t){var i,n,l;if(t.singleton){var o=g++;i=h||(h=s()),n=r.bind(null,i,o,!1),l=r.bind(null,i,o,!0)}else i=s(),n=p.bind(null,i),l=function(){i.parentNode.removeChild(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else l()}}function c(e,t,i){var n=["/** >>"+t+" **/","/** "+t+"<< **/"],l=e.lastIndexOf(n[0]),s=i?n[0]+i+n[1]:"";if(e.lastIndexOf(n[0])>=0){var o=e.lastIndexOf(n[1])+n[1].length;return e.slice(0,l)+s+e.slice(o)}return e+s}function r(e,t,i,n){var l=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=c(e.styleSheet.cssText,t,l);else{var s=document.createTextNode(l),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function p(e,t){var i=t.css,n=t.media,l=t.sourceMap;if(l&&"function"==typeof btoa)try{i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(l))+" */",i='@import url("data:text/css;base64,'+btoa(i)+'")'}catch(s){}if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var a={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},u=d(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),m=d(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=u());var i=l(e);return n(i,t),function(e){for(var s=[],o=0;o<i.length;o++){var c=i[o],r=a[c.id];r.refs--,s.push(r)}if(e){var p=l(e);n(p,t)}for(var o=0;o<s.length;o++){var r=s[o];if(0===r.refs){for(var d=0;d<r.parts.length;d++)r.parts[d]();delete a[r.id]}}}}}]);